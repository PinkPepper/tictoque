{% extends 'frontoffice/footer.html.twig' %}

{% block title %}
    {{ produit.nom }}
{% endblock %}

{% block head %}
    <meta property="og:title" content="{{ produit.nom }} - L'amour Food" />
    <meta property="og:description" content="{{ produit.description|raw }}" />
    <meta property="og:site_name" content="http://amourfood.fr/" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:description" content="{{ produit.description }}" />
    <meta name="twitter:title" content="{{ produit.nom|raw }} - L'amour Food" />
{% endblock %}

{% block body %}

    <div class="container">
        <div class="row ficheProduit">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12" >
                <img src="{{ asset('produits/' ~ produit.image ) }}" style="width:100%; height: 100%;">
            </div>

            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 desc_prod">
                <h1 class="produit_nom">{{ produit.nom }}</h1>
                <span class="glyphicon glyphicon-star"></span>
                <span class="glyphicon glyphicon-star"></span>
                <span class="glyphicon glyphicon-star"></span>
                <span class="glyphicon glyphicon-star"></span>
                <span class="glyphicon glyphicon-star"></span>

                <span class="produit_avis">(12)</span>

                <p class="produit_desc">{{ produit.description | raw }}</p>
                <span class="produit_aller"><a>Allergenes</a></span>

                <p class="produit_prix">5.95€</p>
                <p class="produit_prix_solde">{{ produit.prix }}€</p>

                <select class="produit_quantite">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                </select>

                <button class="ajoutPanier produit_ajout" data-url="{{ path('ajout_panier', {'produit': produit.id}) }}" data-id="{{ produit.id }}" >ajouter au panier</button>

                </br>
                {% if produit.quantite>0 %}
                <span class="produit_stock"><i class="fa fa-circle"></i>PRODUIT EN STOCK</span>
                {% else %}
                <span class="produit_stock"><i class="fa fa-circle"></i>PRODUIT HORS STOCK</span>
                {% endif %}



                <div class="produit_info">
                    <i class="fa fa-map-marker" aria-hidden="true"></i>
                    <span class="near">
                            Ce produit peut être livré prêt de chez vous
                        </span>

                    <i class="fa fa-shopping-bag" aria-hidden="true"></i>
                    <span class="free_ship">
                            Livraison gratuite
                        </span>
                </div>
            </div>
        </div>
    </div>


    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="produit_nav">
                    <ul>
                        <li id="desc_long" class="active">Description</li>
                        {% if produit.allergenes|length>0 %}
                        <li id="aller_long">Allergènes</li>
                        {% endif %}
                        <li id="avis_long">Avis <span class="produit_avis">(12)</span></li>
                    </ul>
                </div>
            </div>

            <div class="col-lg-8 content_nav">
                <div id="afficher_desc_long" style="display:block;">
                <h5>Nom du plat</h5>
                    <p class="produit_desc_long">
                        Lorem itsumLorem itsumLorem itsumLorem itsumLoremLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLoremLorem itsumLorem itsumLorem itsumLorem
                    </p>
                </div>


                <div id="afficher_aller_long" style="display:none;">
                    <p class="produit_desc_long">
                        {% for all in produit.allergenes %}
                        <ul>
                            <li>
                                {{all.nom}}
                            </li>
                        </ul>
                        {% endfor %}
                    </p>
                </div>

                <div id="afficher_avis_long" style="display:none;">
                    <p class="produit_desc_long" >
                        itsumLorem itsumLorem itsumLorem itsumLorem itsumLoremLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLoremLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsumLorem itsum
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="container topMargin">
        <div class="row">
            <div class="col-lg-12 col-md-8 col-xs-6 menu_choix">
                <h4>
                    {% if produit.type == 'entree' %}
                        Associez votre {{ produit.nom }} avec un plat
                    {% elseif produit.type == 'plat'%}
                        Associez votre {{ produit.nom }} avec un dessert
                    {% else %}
                        Découvrez de nouveaux plats
                    {% endif %}
                </h4>
            </div>
        </div>
    </div>
    <div class="row plats_semaine" style="margin:0 auto">
        <div class="col-lg-12 col-md-12 col-xs-12 showPlatSemaine">
            {% for produitSup in autre|slice(0,3) if produitSup.quantite>0 %}
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="showPlat">
                        <div class="showImgPlat">
                            <img class="img-responsive imgPlat" src="{{ asset('produits/'~produitSup.image) }}">
                            <a class="addToCart">Ajouter</a>
                        </div>
                        <div class="showDescPlat">
                            <p class="typeProduct">{{ produitSup.type|upper }}</p>
                            <div class="row">
                                <h4 class="titleProduct col-lg-8 col-md-12 col-sm-12 col-xs-12">{{ produitSup.nom|upper }}</h4>
                                <span class="prixProduct col-lg-2 col-md-6 col-md-6  col-xs-12 prix">{{ produitSup.prix }}€</span>
                                <span class="descProduit col-lg-12 col-md-12 col-md-12 col-xs-12">{{ produitSup.description|raw }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="application/javascript">
        $(document).ready(function(){

            $(".produit_aller").click(function(){
                $('#aller_long').addClass("active");
                $('#afficher_aller_long').css("display","block");
                $('#desc_long').removeClass('active');
                $('#afficher_desc_long').css("display","none");
                $('#avis_long').removeClass('active');
                $('#afficher_avis_long').css("display","none");
            });
            $("#aller_long").click(function(){
                $(this).addClass("active");
                $('#afficher_aller_long').css("display","block");
                $('#desc_long').removeClass('active');
                $('#afficher_desc_long').css("display","none");
                $('#avis_long').removeClass('active');
                $('#afficher_avis_long').css("display","none");
            });
            $("#desc_long").click(function(){
                $(this).addClass("active");
                $('#afficher_desc_long').css("display","block");
                $('#aller_long').removeClass('active');
                $('#afficher_aller_long').css("display","none");
                $('#avis_long').removeClass('active');
                $('#afficher_avis_long').css("display","none");
            });
            $("#avis_long").click(function(){
                $(this).addClass("active");
                $('#afficher_avis_long').css("display","block");
                $('#desc_long').removeClass('active');
                $('#afficher_aller_long').css("display","none");
                $('#aller_long').removeClass('active');
                $('#afficher_desc_long').css("display","none");
            });


            $('.ajoutPanier').on('click', function (e) {
                e.preventDefault();
                var url = $(this).data('url');
                var id = $(this).data('id');

                console.log('click');
                console.log(url);
                $(this).load(url);
                $(this).prop('disabled', true);
            }) ;
        });
    </script>
{% endblock %}
