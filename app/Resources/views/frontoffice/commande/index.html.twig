{% extends 'frontoffice/base.html.twig' %}

{% block title %}Paiement{% endblock %}

{% block body %}
    <div class="panier">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-sm-12 col-md-12 col-xs-12 livraison_paiement">
                <h4>Livraison et paiement</h4>

                <input type="text"  id="input" placeholder="Adresse de mon entreprise" required="">
                <div class="choix_relais" data-adresse="{{ app.user.adresse }}" data-url="{{ path('commande_point_relais', {'adresse': '_adresse_'}) }}"></div>
            </div>
            <div class="col-lg-offset-1 col-lg-3 col-sm-12 col-md-12 col-xs-12 commande">
                <h4>Commande</h4>
                <div class="bar"></div>
                <b><p>Total <span id="total"  class="total">
                        {{ app.session.get('prix') }}€
                    </span></p></b>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-8 col-sm-12 col-md-12 col-xs-12">
                <h3>Choisissez votre mode de paiement pour continuer</h3>
                <div class="paiement_carte">
                    <div class="carte_header">
                        <img src="{{ asset('img/picto_carte_bancaire.png') }}"><h4>Paiement par carte</h4>
                        <div class="carte_img">
                            <img src="{{ asset('img/cb.jpg') }}">
                            <img src="{{ asset('img/visa.jpg') }}">
                            <img src="{{ asset('img/master_card.jpg') }}">
                        </div>
                    </div>
                    <div class="carte_details">
                        <div class="numero_cb">
                            <label>Numéro de la carte</label>
                            <input type="text" name="carte_numero" class="carte_numero" placeholder="4111 1111 1111 1111">
                        </div>
                        <div class="chiffre_cb">
                            <label>Date d'éxpritation</label>
                            <input type="text" name="date_expiration" class="date_expiration" placeholder="MM/YY">
                            <label>Cryptogramme</label>
                            <input type="text" name="crypto" class="crypto" placeholder="758">
                        </div>
                        <a href="{{ path('commande_succes') }}" class="paimement_valider"  >Valider mon paiement</a>
                    </div>
                    <a href="">
                    <div class="paiement_paypal">
                        <img src="{{ asset('img/picto_paypal.png') }}"><h4>Paypal</h4>
                        <img src="{{ asset('img/paypal.svg') }}">
                    </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        $(document).ready(function(){
            var adresse = $('.choix_relais').data('adresse');

            if(adresse != null){
                const url = $(".choix_relais").data('url');
                $('#input').val(adresse);
                adresse = adresse.replace(/ /g, '%20');
                $('.choix_relais').load(url.replace(/_adresse_/, adresse));
            }

            $('#input').keypress(function(e) {
                if(e.which == 13) {
                    const url = $(".choix_relais").data('url');
                    var adresse = $('#input').val();
                    adresse = adresse.replace(/ /g, '%20');
                    $('.choix_relais').load(url.replace(/_adresse_/, adresse));
                }
            });
        });

    </script>
{% endblock %}